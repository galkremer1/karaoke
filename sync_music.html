<!DOCTYPE html>
<html>
<head>
    <script>
        function lyricsDisplay() {

            if (timing[Math.round($("#jquery_jplayer_1").data("jPlayer").status.currentTime)] !== undefined)
            {
                document.getElementById('lyrics_display').innerHTML = timing[Math.round($("#jquery_jplayer_1").data("jPlayer").status.currentTime)];;
            }
            var t = setTimeout(function(){lyricsDisplay()},400);

        }

    </script>
<meta charset="utf-8" />
<!-- Website Design By: www.happyworm.com -->
<title>Music sync</title>

    <textarea cols="40" rows="5" id="lyricsinput">
Replace this text with your lyrics.
</textarea>
    <button onclick="submitLyrics()">Submit</button>
    <p id="lyrics"></p>
    <p id="display"></p>
    Current Line:
    <div id="lyrics_display"></div>
    <BR>
    <div id="line1"></div>
    <div id="line2"></div>
    <div id="line3"></div>
    <div id="line4"></div>



    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="dist/skin/blue.monday/css/jplayer.blue.monday.min.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="lib/jquery.min.js"></script>
<script type="text/javascript" src="dist/jplayer/jquery.jplayer.min.js"></script>
<script type="text/javascript">
//<![CDATA[
$(document).ready(function(){

	$("#jquery_jplayer_1").jPlayer({
		ready: function (event) {
			$(this).jPlayer("setMedia", {
				title: "What is love",
				mp3: "http://www.sk89q.com/playground/ricekaraoke/karaoke/what_is_love.mp3",
			});
		},
		swfPath: "../../dist/jplayer",
		supplied: "mp3",
		wmode: "window",
		useStateClassSkin: true,
		autoBlur: false,
		smoothPlayBar: true,
		keyEnabled: true,
		remainingDuration: true,
		toggleDuration: true
	});
});
</script>
</head>

<body onload="lyricsDisplay()">

<div id="jquery_jplayer_1" class="jp-jplayer"></div>
<div id="jp_container_1" class="jp-audio" role="application" aria-label="media player">
	<div class="jp-type-single">
		<div class="jp-gui jp-interface">
			<div class="jp-controls">
				<button class="jp-play" role="button" tabindex="0">play</button>
				<button class="jp-stop" role="button" tabindex="0">stop</button>
			</div>
			<div class="jp-progress">
				<div class="jp-seek-bar">
					<div class="jp-play-bar"></div>
				</div>
			</div>
			<div class="jp-volume-controls">
				<button class="jp-mute" role="button" tabindex="0">mute</button>
				<button class="jp-volume-max" role="button" tabindex="0">max volume</button>
				<div class="jp-volume-bar">
					<div class="jp-volume-bar-value"></div>
				</div>
			</div>
			<div class="jp-time-holder">
				<div class="jp-current-time" role="timer" aria-label="time">&nbsp;</div>
				<div class="jp-duration" role="timer" aria-label="duration">&nbsp;</div>
				<div class="jp-toggles">
					<button class="jp-repeat" role="button" tabindex="0">repeat</button>
				</div>
			</div>
		</div>
		<div class="jp-details">
			<div class="jp-title" aria-label="title">&nbsp;</div>
		</div>
		<div class="jp-no-solution">
			<span>Update Required</span>
			To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
		</div>
	</div>
</div>


</body>


<script>

	timing= {};
    word_index=0;
    display_index=0;
	$(document).keypress(function( event ) {
        jPlayer_c_time=Math.round($("#jquery_jplayer_1").data("jPlayer").status.currentTime);
		if ( event.which == 115 & !$('#jquery_jplayer_1').data().jPlayer.status.paused & word_index<lyrics_words.length) {
            timing[jPlayer_c_time]=lyrics_words[word_index];
            word_index+=1;
            if (word_index%4==0 & word_index>0)
            {
                display_index+=4;
            }
            document.getElementById("line1").innerHTML = lyrics_words[display_index];
            document.getElementById("line2").innerHTML = lyrics_words[display_index+1];
            document.getElementById("line3").innerHTML = lyrics_words[display_index+2];
            document.getElementById("line4").innerHTML = lyrics_words[display_index+3];

		}

	});

    function submitLyrics() {
        lyrics_words = $('#lyricsinput').val().split("\n"); //Splitting the words into lines
        lyrics_words = $.grep(lyrics_words,function(n){ return(n) }); //removing empty lines
    //for testing purpose    document.getElementById("lyrics").innerHTML = lyrics_words;
        document.getElementById('lyrics_display').innerHTML = lyrics_words[0];
        document.getElementById("line1").innerHTML = lyrics_words[0];
        document.getElementById("line2").innerHTML = lyrics_words[1];
        document.getElementById("line3").innerHTML = lyrics_words[2];
        document.getElementById("line4").innerHTML = lyrics_words[3];
    }





</script>


</html>
